version: 1.0
runtime: nodejs14
build:
  commands:
    build:
      - echo "Installing dependencies"
      - npm ci
      - echo "Building application"
      - npm run build
run:
  runtime-version: 14
  command: npm start
  network:
    port: 8080
    env: PORT
  env:
    - name: NODE_ENV
      value: production
    - name: PORT
      value: 8080
    # Environment variables will be set via AWS App Runner service configuration
    # - name: SUPABASE_URL
    #   value: "your-supabase-url"
    # - name: SUPABASE_ANON_KEY
    #   value: "your-supabase-anon-key"
    # - name: SUPABASE_SERVICE_ROLE_KEY
    #   value: "your-supabase-service-role-key"
    # - name: OPENAI_API_KEY
    #   value: "your-openai-api-key"
    # - name: SMTP_HOST
    #   value: "your-smtp-host"
    # - name: SMTP_PORT
    #   value: "587"
    # - name: SMTP_USER
    #   value: "your-smtp-user"
    # - name: SMTP_PASSWORD
    #   value: "your-smtp-password"
